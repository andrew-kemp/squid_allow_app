{% extends 'base.html' %}

{% block title %}Unsorted Domains - Squid Allow Manager{% endblock %}

{% block content %}
<div class="card">
    <h2>Unsorted Domains</h2>
    {% set page = 'unsorted' %}
    {% include '_actions_button.html' %}
    <form method="post" action="{{ url_for('manage_unsorted') }}">
        <table>
            <tr>
                <th><input type="checkbox" id="selectAll"></th>
                <th>Domain</th>
                <th>Actions</th>
            </tr>
            {% for domain in domains %}
            <tr>
                <td><input type="checkbox" name="selected_domains" value="{{ domain }}"></td>
                <td>{{ domain }}</td>
                <td>
                    <button type="submit" name="action" value="allow:{{ domain }}" class="btn btn-primary">Allow</button>
                    <button type="submit" name="action" value="block:{{ domain }}" class="btn btn-danger">Block</button>
                </td>
            </tr>
            {% endfor %}
        </table>
    </form>
</div>
<script>
document.getElementById('selectAll')?.addEventListener('change', function(e) {
    document.querySelectorAll('input[name="selected_domains"]').forEach(cb => cb.checked = e.target.checked);
});
</script>
{% endblock %}