<!DOCTYPE html>
<html>
<head>
    <title>Allowed Sites</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    {% if changes_pending %}
    <div class="banner-alert" style="background: #fffbe6; border-bottom: 1px solid #fde4a0; color: #ad8b00; padding: 18px 16px; text-align: center; font-weight: 600;">
        <div style="font-size: 1.15rem; margin-bottom: 12px;">
            Changes detected: Please restart the Squid service to apply updates.
        </div>
        <form method="post" action="{{ url_for('restart_squid') }}">
            <button type="submit" class="btn btn-primary" style="margin-top: 2px;">Restart Squid</button>
        </form>
    </div>
    {% endif %}
    <div class="card">
        <h2>Allowed Sites</h2>
        <div class="actions">
            <form action="/" method="get" style="display:inline;">
                <button type="submit" class="btn btn-primary">Back to Blocked Domains</button>
            </form>
        </div>
        <table>
            <tr>
                <th>Allowed Domain</th>
                <th>Remove</th>
            </tr>
            {% for entry in allow_list %}
            <tr>
                <td>{{ entry }}</td>
                <td class="center">
                    <form action="/remove_allow" method="post" style="display:inline;">
                        <input type="hidden" name="entry" value="{{ entry }}">
                        <button type="submit" class="trash-btn" title="Remove">
                            <span class="trash-icon">&#128465;</span>
                        </button>
                    </form>
                </td>
            </tr>
            {% endfor %}
        </table>
    </div>
</body>
</html>
