<div class="floating-btns">
  <button type="button" class="btn btn-warning" id="floating-restart-btn">
    Restart Squid
  </button>
  <form method="post" action="{{ url_for('logout') }}" style="display:inline;">
    <button type="submit" class="btn btn-secondary" id="floating-logout-btn">
      Logout
    </button>
  </form>
  <span id="floating-restart-spinner" style="display:none;vertical-align:middle;">
    <svg width="28" height="28" viewBox="0 0 44 44" stroke="#2563eb">
      <g fill="none" fill-rule="evenodd" stroke-width="4">
        <circle cx="22" cy="22" r="20" stroke-opacity=".2"/>
        <path d="M42 22c0-11.046-8.954-20-20-20">
          <animateTransform attributeName="transform" type="rotate"
            from="0 22 22" to="360 22 22"
            dur="0.9s" repeatCount="indefinite"/>
        </path>
      </g>
    </svg>
    Restarting...
  </span>
</div>
<script>
document.getElementById("floating-restart-btn").onclick = function() {
  this.style.display = "none";
  document.getElementById("floating-restart-spinner").style.display = "inline-block";
  fetch('{{ url_for("restart_squid") }}', {method:"POST"})
    .then(r => r.json())
    .then(data => {
      document.getElementById("floating-restart-spinner").innerHTML = data.message || "Restarted!";
      setTimeout(() => location.reload(), 2000);
    });
};
</script>